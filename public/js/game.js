!function(e){function t(c){if(r[c])return r[c].exports;var a=r[c]={exports:{},id:c,loaded:!1};return e[c].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function c(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var a=r(1),o=r(13),p=r(14),u=r(17),m=r(18),v=r(20),n=r(15),i=r(21),l=r(16),s=r(22),d=io();d.on("game",function(e){console.log(e);var t=e.players,r=e.field,y=e.captured,f=(r.length,r[0].length,t.findIndex(function(e){return e.id===player.id})+1),g=0,h=document.getElementById("players"),E=document.getElementById("field"),I=document.getElementById("info"),L=document.getElementById("capture-player-1"),B=document.getElementById("capture-player-2");h.innerHTML=s(t),E.innerHTML=l(r),I.innerHTML="",I.innerHTML="Place the rival's King in the last row!",player.id===t[0].id?L.innerHTML='<span class="piece player-2 king" id="place-king">King</span>':B.innerHTML='<span class="piece player-1 king" id="place-king">King</span>',document.getElementById("place-king").addEventListener("click",function(e){var t=a.find(function(e){return"King"===e.type});this.remove(),n(t,r,f,d)}),d.on("king",function(e){console.log(e),r=e.field,E.innerHTML=l(r),I.innerHTML="",I.innerHTML="Select your pieces for this game ...",I.innerHTML+='<br>Points available: <span id="available-points">'+u(player,t)+"</span>",I.innerHTML+='\n            <div class="pieces-container" id="pieces-container">\n                  '+a.filter(function(e){return e.value}).map(function(e){return'\n                        <span class="piece player-'+f+" "+o(e.type)+'" id="piece-select-'+o(e.type)+'" data-type="'+o(e.type)+'">\n                            '+e.type+"\n                        </span>"})+"\n            </div>\n        ",Array.from(document.querySelectorAll(".piece")).forEach(function(e){e.addEventListener("click",function(e){var t=e.target.dataset.type,c=a.find(function(e){return o(e.type)===t});p(c,r,f,d)})})}),d.on("turn",function(e){console.log(e),r=e.field,y=e.captured,g=e.turn,E.innerHTML=l(r),L.innerHTML=i(y[0]),B.innerHTML=i(y[1]),document.querySelector("table.field").addEventListener("click",function(e){return v(e,r,a,d)}),g%2===0&&1===f||g%2===1&&2===f?I.innerHTML="Waiting for your rival to play ...":(I.innerHTML="Your turn!",Array.from(document.querySelectorAll(".piece.player-"+f)).forEach(function(e){e.addEventListener("click",function(e){var t=a.find(function(t){return t.type===e.target.dataset.type}),o={i:parseInt(e.target.parentNode.id.split("-")[0],10),j:parseInt(e.target.parentNode.id.split("-")[1],10)};[].concat(c(document.querySelectorAll(".selected")),c(document.querySelectorAll(".move")),c(document.querySelectorAll(".capture"))).forEach(function(e){e.classList.remove("selected"),e.classList.remove("move"),e.classList.remove("capture")}),m(r,t,o,f)})}))})})},function(e,t,r){"use strict";var c=[r(2),r(3),r(4),r(5),r(6),r(7),r(8),r(9),r(10),r(11),r(12)];e.exports=c},function(e,t){"use strict";var r={type:"Pawn",value:1,infighting:!0,action:{plain:[[{move:!1,capture:!0},{move:!0,capture:!1},{move:!1,capture:!0}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]],hill:[[{move:!1,capture:!0},{move:!0,capture:!1},{move:!1,capture:!0}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]],river:[[{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]]}};e.exports=r},function(e,t){"use strict";var r={type:"Slinger",value:2,infighting:!1,action:{plain:[[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!0},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]],hill:[[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!0},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]],river:[[{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]]}};e.exports=r},function(e,t){"use strict";var r={type:"Lancer",value:2,infighting:!0,action:{plain:[[{move:!1,capture:!1},{move:!0,capture:!0},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]],hill:[[{move:!1,capture:!1},{move:!0,capture:!0},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]],river:[[{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]]}};e.exports=r},function(e,t){"use strict";var r={type:"Archer",value:3,infighting:!1,action:{plain:[[{move:!1,capture:!1},{move:!1,capture:!0},{move:!1,capture:!0},{move:!1,capture:!0},{move:!1,capture:!1}],[{move:!1,capture:!0},{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1},{move:!1,capture:!0}],[{move:!1,capture:!0},{move:!0,capture:!1},{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!0}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]],hill:[[{move:!1,capture:!0},{move:!1,capture:!0},{move:!1,capture:!0},{move:!1,capture:!0},{move:!1,capture:!0}],[{move:!1,capture:!0},{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1},{move:!1,capture:!0}],[{move:!1,capture:!0},{move:!0,capture:!1},{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!0}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]],river:[[{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]]}};e.exports=r},function(e,t){"use strict";var r={type:"Lord",value:3,infighting:!0,action:{plain:[[{move:!0,capture:!0},{move:!0,capture:!0},{move:!0,capture:!0}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0}]],hill:[[{move:!0,capture:!0},{move:!0,capture:!0},{move:!0,capture:!0}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0}]],river:[[{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]]}};e.exports=r},function(e,t){"use strict";var r={type:"Knight",value:3,infighting:!0,action:{plain:[[{move:!1,capture:!1},{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0},{move:!1,capture:!1}],[{move:!0,capture:!0},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!0,capture:!0}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!0},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]],hill:[[{move:!1,capture:!1},{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0},{move:!1,capture:!1}],[{move:!0,capture:!0},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!0,capture:!0}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!0},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]],river:[[{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]]}};e.exports=r},function(e,t){"use strict";var r={type:"Bishop",value:3,infighting:!0,action:{plain:[[{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0}]],hill:[[{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0}]],river:[[{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]]}};e.exports=r},function(e,t){"use strict";var r={type:"Tower",value:4,infighting:!0,action:{plain:[[{move:!1,capture:!1},{move:!0,capture:!0},{move:!1,capture:!1}],[{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0}],[{move:!1,capture:!1},{move:!0,capture:!0},{move:!1,capture:!1}]],hill:[[{move:!1,capture:!1},{move:!0,capture:!0},{move:!1,capture:!1}],[{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0}],[{move:!1,capture:!1},{move:!0,capture:!0},{move:!1,capture:!1}]],river:[[{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]]}};e.exports=r},function(e,t){"use strict";var r={type:"Royal Guard",value:4,infighting:!0,action:{plain:[[{move:!0,capture:!0},{move:!0,capture:!0},{move:!0,capture:!0}],[{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0}],[{move:!1,capture:!1},{move:!0,capture:!0},{move:!1,capture:!1}]],hill:[[{move:!0,capture:!0},{move:!0,capture:!0},{move:!0,capture:!0}],[{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0}],[{move:!1,capture:!1},{move:!0,capture:!0},{move:!1,capture:!1}]],river:[[{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]]}};e.exports=r},function(e,t){"use strict";var r={type:"General",value:5,infighting:!0,action:{plain:[[{move:!0,capture:!0},{move:!0,capture:!0},{move:!0,capture:!0}],[{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0}],[{move:!0,capture:!0},{move:!0,capture:!0},{move:!0,capture:!0}]],hill:[[{move:!0,capture:!0},{move:!0,capture:!0},{move:!0,capture:!0}],[{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0}],[{move:!0,capture:!0},{move:!0,capture:!0},{move:!0,capture:!0}]],river:[[{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]]}};e.exports=r},function(e,t){"use strict";var r={type:"King",value:0,infighting:!0,action:{plain:[[{move:!0,capture:!0},{move:!0,capture:!0},{move:!0,capture:!0}],[{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0}],[{move:!0,capture:!0},{move:!0,capture:!0},{move:!0,capture:!0}]],hill:[[{move:!0,capture:!0},{move:!0,capture:!0},{move:!0,capture:!0}],[{move:!0,capture:!0},{move:!1,capture:!1},{move:!0,capture:!0}],[{move:!0,capture:!0},{move:!0,capture:!0},{move:!0,capture:!0}]],river:[[{move:!1,capture:!1},{move:!0,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}],[{move:!1,capture:!1},{move:!1,capture:!1},{move:!1,capture:!1}]]}};e.exports=r},function(e,t){"use strict";e.exports=function(e){if("string"!=typeof e)throw new TypeError("expected a string");return e=e.replace(/([a-z])([A-Z])/g,"$1-$2"),e=e.replace(/[ \t\W]/g,"-"),e=e.replace(/^-+|-+$/g,""),e.toLowerCase()}},function(e,t,r){"use strict";var c=r(13),a=r(15),o=function(e,t,r,o){var p=document.getElementById("available-points"),u=document.getElementById("info"),m=parseInt(p.innerHTML,10),v=m-e.value;if(v>=0){var n=document.getElementById("capture-player-"+r);"General"===e.type&&document.getElementById("piece-select-general").remove(),"Royal Guard"===e.type&&n.innerHTML.indexOf("Royal Guard")>-1&&document.getElementById("piece-select-royal-guard").remove(),n.innerHTML+='<p><span data-type="'+e.type+'" class="piece player-'+r+" "+c(e.type)+'">'+e.type+"</span></p>"}v>0?(p.innerHTML=v,v<5&&document.getElementById("piece-select-general")&&document.getElementById("piece-select-general").remove(),v<4&&(document.getElementById("piece-select-royal-guard")&&document.getElementById("piece-select-royal-guard").remove(),document.getElementById("piece-select-tower")&&document.getElementById("piece-select-tower").remove()),v<3&&(document.getElementById("piece-select-archer")&&document.getElementById("piece-select-archer").remove(),document.getElementById("piece-select-bishop")&&document.getElementById("piece-select-bishop").remove(),document.getElementById("piece-select-knight")&&document.getElementById("piece-select-knight").remove(),document.getElementById("piece-select-lord")&&document.getElementById("piece-select-lord").remove()),v<2&&(document.getElementById("piece-select-lancer")&&document.getElementById("piece-select-lancer").remove(),document.getElementById("piece-select-slinger")&&document.getElementById("piece-select-slinger").remove())):(document.getElementById("pieces-container").remove(),u.innerHTML="<p>Place your selected pieces on the field ...</p>",Array.from(document.querySelectorAll("#capture-player-"+r+" p")).forEach(function(e){e.addEventListener("click",function(e){var c=e.target.dataset.type;this.remove(),a(c,t,r,o)})}))};e.exports=o},function(e,t,r){"use strict";var c=r(16),a=function(e,t,r,a){var o=t.length,p=t[0].length,u=document.getElementById("info");if("King"===e.type)for(var m=function(e){for(var m=function(m){var v=document.getElementById(e+"-"+m);1===r&&(e!==o-1||0===m||m===p-1)||2===r&&(0!==e||0===m||m===p-1)?v.className+=" forbidden":v.addEventListener("click",function(o){t[e][m].piece={type:"King",player:1===r?2:1},document.getElementById("field").innerHTML=c(t),a.emit("king",{position:{i:e,j:m}}),u.innerHTML="Waiting on your rival to place your king ..."})},v=0;v<p;v++)m(v)},v=0;v<o;v++)m(v);else for(var n=function(m){for(var v=function(p){var v=document.getElementById(m+"-"+p);1===r&&0!==m&&1!==m&&2!==m||2===r&&m!==o-1&&m!==o-2&&m!==o-3||v.innerHTML||"river"===t[m][p].type?v.className.indexOf("forbidden")===-1&&(v.className+=" forbidden"):v.addEventListener("click",function(o){t[m][p].piece={type:e,player:r},document.getElementById("field").innerHTML=c(t),document.querySelectorAll("#capture-player-"+r+" p").length||!function(){var e=[];t.forEach(function(t,r){t.forEach(function(t,c){t.piece&&"King"!==t.piece.type&&e.push({type:t.piece.type,i:r,j:c})})}),a.emit("initial",{pieces:e}),u.innerHTML="Waiting on your rival to place his/her pieces ..."}()})},n=0;n<p;n++)v(n)},i=0;i<o;i++)n(i)};e.exports=a},function(e,t,r){"use strict";var c=r(13),a=function(e){var t=e.length,r=e[0].length,a="";a+='<table class="field">';for(var o=0;o<t;o++){a+="<tr>";for(var p=0;p<r;p++)a+='<td id="'+o+"-"+p+'" class="tile '+e[o][p].type+'">'+(e[o][p].piece?"<span data-type='"+e[o][p].piece.type+"' class='piece player-"+e[o][p].piece.player+" "+c(e[o][p].piece.type)+"'>"+e[o][p].piece.type+"</span>":"")+"</td>";a+="</tr>"}return a+="</table>"};e.exports=a},function(e,t){"use strict";var r=function(e,t){var r=t.find(function(t){return t.id!==e.id});return r.level>=e.level?33:33-(e.level-r.level)};e.exports=r},function(e,t,r){"use strict";var c=r(19),a=function(e,t,r,a){document.getElementById(r.i+"-"+r.j).className+=" selected";for(var o=e[r.i][r.j].type,p=1===a?c(t.action[o],2):t.action[o],u=Math.floor(p.length/2),m={i:{start:Math.max(0,r.i-u),end:Math.min(e.length-1,r.i+u)},j:{start:Math.max(0,r.j-u),end:Math.min(e[0].length-1,r.j+u)}},v={i:u-r.i,j:u-r.j},n=m.i.start;n<=m.i.end;n++)for(var i=m.j.start;i<=m.j.end;i++){var l=document.getElementById(n+"-"+i),s=p[n+v.i][i+v.j].move,d=p[n+v.i][i+v.j].capture;s&&!e[n][i].piece&&(l.className+=" move"),d&&e[n][i].piece&&e[n][i].piece.player!==a&&(l.className+=" capture")}};e.exports=a},function(e,t,r){!function(r){"use strict";function c(e,t){if(!(Array.isArray(e)&&e.length>0))return[];if("number"!=typeof t)t=1;else if(0===t)return e;for(var r=[],a=0,o=e.length;a<o;a++){for(var p=0,u=e[a].length;p<u;p++){if(o!==u)return[];r[a]=r[a]||[],r[a][p]=e[p][a]}t>0&&(r[a]=r[a].reverse())}for(t<0&&r.reverse();t>0?t--:t++;)r=c(r,t);return r}"undefined"!=typeof e&&e.exports&&(t=e.exports=c),t.rotateMatrix=c}(this)},function(e,t){"use strict";var r=function(e,t,r,c){var a=document.querySelector(".selected"),o=a.id,p={i:parseInt(o.split("-")[0],10),j:parseInt(o.split("-")[1],10)},u=e.target.id,m={i:parseInt(u.split("-")[0],10),j:parseInt(u.split("-")[1],10)},v=r.find(function(e){return e.type===a.children[0].dataset.type});e.target&&e.target.matches(".move")?c.emit("turn",{type:"move",piece:v,start:p,end:m}):e.target&&e.target.matches(".capture")&&c.emit("turn",{type:"capture",piece:v,start:p,end:m})};e.exports=r},function(e,t,r){"use strict";var c=r(13),a=function(e){var t="";return t+='<p><span class="captured-back">'+(5-e.back)+"</span></p>",t+=e.pieces.reduce(function(e,t){return e+('<p><span data-type="'+t.type+'" class="piece player-'+t.player+" "+c(t.type)+'">'+t.type+"</span></p>")},"")};e.exports=a},function(e,t){"use strict";var r=function(e){var t=e[0],r=e[1];return'<span class="player-1">'+t.name+'</span> vs <span class="player-2">'+r.name+"</span>"};e.exports=r}]);