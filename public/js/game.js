!function(e){function t(a){if(r[a])return r[a].exports;var c=r[a]={exports:{},id:a,loaded:!1};return e[a].call(c.exports,c,c.exports,t),c.loaded=!0,c.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";var a=r(3),c=r(4),o=r(9),u=r(11),p=r(16),m=r(10),v=r(12),n=r(13),i=r(14),l=io();l.on("game",function(e){console.log(e);var t=e.players,r=e.field,d=e.captured,s=(r.length,r[0].length,t.findIndex(function(e){return e.id===player.id})+1),g=0,f=document.getElementById("players"),y=document.getElementById("field"),h=document.getElementById("info"),E=document.getElementById("capture-player-1"),I=document.getElementById("capture-player-2");f.innerHTML=i(t),y.innerHTML=n(r),h.innerHTML="",h.innerHTML="Place the rival's King in the last row!",player.id===t[0].id?E.innerHTML='<span class="piece player-2 king" id="place-king">King</span>':I.innerHTML='<span class="piece player-1 king" id="place-king">King</span>',document.getElementById("place-king").addEventListener("click",function(e){var t=a.find(function(e){return"King"===e.name});this.remove(),m(t,r,s)}),l.on("king",function(e){console.log(e),r=e.field,y.innerHTML=n(r),h.innerHTML="",h.innerHTML="Select your pieces for this game ...",h.innerHTML+='<br>Points available: <span id="available-points">'+u(player,t)+"</span>",h.innerHTML+='\n            <div class="pieces-container" id="pieces-container">\n                  '+a.filter(function(e){return e.value}).map(function(e){return'\n                        <span class="piece player-'+s+" "+c(e.name)+'" id="piece-select-'+c(e.name)+'" data-name="'+c(e.name)+'">\n                            '+e.name+"\n                        </span>"})+"\n            </div>\n        ",Array.from(document.querySelectorAll(".piece")).forEach(function(e){e.addEventListener("click",function(e){var t=e.target.dataset.name,u=a.find(function(e){return c(e.name)===t});o(u,r,s)})})}),l.on("turn",function(e){console.log(e),r=e.field,d=e.captured,g=e.turn,y.innerHTML=n(r),E.innerHTML=v(d[0]),I.innerHTML=v(d[1]),g%2===0?player.id===t[0].id?h.innerHTML="Waiting for your rival to play ...":(h.innerHTML="Your turn!",Array.from(document.querySelectorAll(".piece.player-2")).forEach(function(e){e.addEventListener("click",function(e){console.log(e);var t=a.find(function(t){return t.name===e.target.dataset.name}),c={i:parseInt(e.target.parentNode.id.split("-")[0],10),j:parseInt(e.target.parentNode.id.split("-")[1],10)};document.getElementById("field").innerHTML=n(r),p(r,t,c,s),document.getElementById(c.i+"-"+c.j).addEventListener("click",function(e){document.getElementById("field").innerHTML=n(r)})})})):player.id===t[0].id?(h.innerHTML="Your turn!",Array.from(document.querySelectorAll(".piece.player-1")).forEach(function(e){e.addEventListener("click",function(e){console.log(e);var t=a.find(function(t){return t.name===e.target.dataset.name}),c={i:parseInt(e.target.parentNode.id.split("-")[0],10),j:parseInt(e.target.parentNode.id.split("-")[1],10)};document.getElementById("field").innerHTML=n(r),p(r,t,c,s),document.getElementById(c.i+"-"+c.j).addEventListener("click",function(e){document.getElementById("field").innerHTML=n(r)})})})):h.innerHTML="Waiting for your rival to play ..."})})},,,function(e,t){"use strict";var r=[{name:"Pawn",value:1,action:{plain:[[{move:0,capture:1},{move:1,capture:0},{move:0,capture:1}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]],hill:[[{move:0,capture:1},{move:1,capture:0},{move:0,capture:1}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]],river:[[{move:0,capture:0},{move:1,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]]}},{name:"Slinger",value:2,action:{plain:[[{move:0,capture:0},{move:0,capture:0},{move:0,capture:1},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:1,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]],hill:[[{move:0,capture:0},{move:0,capture:0},{move:0,capture:2},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:1,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]],river:[[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:1,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]]}},{name:"Lancer",value:2,action:{plain:[[{move:0,capture:0},{move:1,capture:2},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]],hill:[[{move:0,capture:0},{move:1,capture:2},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]],river:[[{move:0,capture:0},{move:1,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]]}},{name:"Archer",value:3,action:{plain:[[{move:0,capture:0},{move:0,capture:1},{move:0,capture:1},{move:0,capture:1},{move:0,capture:0}],[{move:0,capture:1},{move:0,capture:0},{move:1,capture:0},{move:0,capture:0},{move:0,capture:1}],[{move:0,capture:1},{move:1,capture:0},{move:0,capture:0},{move:1,capture:0},{move:0,capture:1}],[{move:0,capture:0},{move:0,capture:0},{move:1,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]],hill:[[{move:0,capture:1},{move:0,capture:2},{move:0,capture:2},{move:0,capture:2},{move:0,capture:1}],[{move:0,capture:2},{move:0,capture:0},{move:1,capture:0},{move:0,capture:0},{move:0,capture:2}],[{move:0,capture:2},{move:1,capture:0},{move:0,capture:0},{move:1,capture:0},{move:0,capture:2}],[{move:0,capture:0},{move:0,capture:0},{move:1,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]],river:[[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:1,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]]}},{name:"Lord",value:3,action:{plain:[[{move:1,capture:1},{move:1,capture:1},{move:1,capture:1}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:1,capture:1},{move:0,capture:0},{move:1,capture:1}]],hill:[[{move:1,capture:1},{move:1,capture:1},{move:1,capture:1}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:1,capture:1},{move:0,capture:0},{move:1,capture:1}]],river:[[{move:0,capture:0},{move:1,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]]}},{name:"Knight",value:3,action:{plain:[[{move:0,capture:0},{move:1,capture:1},{move:0,capture:0},{move:1,capture:1},{move:0,capture:0}],[{move:1,capture:1},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:1,capture:1}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:1},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]],hill:[[{move:0,capture:0},{move:1,capture:1},{move:0,capture:0},{move:1,capture:1},{move:0,capture:0}],[{move:1,capture:1},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:1,capture:1}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:1},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]],river:[[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:1,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]]}},{name:"Bishop",value:3,action:{plain:[[{move:2,capture:2},{move:0,capture:0},{move:2,capture:2}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:2,capture:2},{move:0,capture:0},{move:2,capture:2}]],hill:[[{move:1,capture:1},{move:0,capture:0},{move:1,capture:1}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:1,capture:1},{move:0,capture:0},{move:1,capture:1}]],river:[[{move:0,capture:0},{move:1,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]]}},{name:"Tower",value:4,action:{plain:[[{move:0,capture:0},{move:10,capture:10},{move:0,capture:0}],[{move:10,capture:10},{move:0,capture:0},{move:10,capture:10}],[{move:0,capture:0},{move:10,capture:10},{move:0,capture:0}]],hill:[[{move:0,capture:0},{move:1,capture:1},{move:0,capture:0}],[{move:1,capture:1},{move:0,capture:0},{move:1,capture:1}],[{move:0,capture:0},{move:1,capture:1},{move:0,capture:0}]],river:[[{move:0,capture:0},{move:1,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]]}},{name:"Royal Guard",value:4,action:{plain:[[{move:2,capture:2},{move:2,capture:2},{move:2,capture:2}],[{move:2,capture:2},{move:0,capture:0},{move:2,capture:2}],[{move:0,capture:0},{move:1,capture:1},{move:0,capture:0}]],hill:[[{move:1,capture:1},{move:1,capture:1},{move:1,capture:1}],[{move:1,capture:1},{move:0,capture:0},{move:1,capture:1}],[{move:0,capture:0},{move:1,capture:1},{move:0,capture:0}]],river:[[{move:0,capture:0},{move:1,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]]}},{name:"General",value:5,action:{plain:[[{move:10,capture:10},{move:10,capture:10},{move:10,capture:10}],[{move:10,capture:10},{move:0,capture:0},{move:10,capture:10}],[{move:10,capture:10},{move:10,capture:10},{move:10,capture:10}]],hill:[[{move:1,capture:1},{move:1,capture:1},{move:1,capture:1}],[{move:1,capture:1},{move:0,capture:0},{move:1,capture:1}],[{move:1,capture:1},{move:1,capture:1},{move:1,capture:1}]],river:[[{move:0,capture:0},{move:1,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]]}},{name:"King",value:0,action:{plain:[[{move:1,capture:1},{move:1,capture:1},{move:1,capture:1}],[{move:1,capture:1},{move:0,capture:0},{move:1,capture:1}],[{move:1,capture:1},{move:1,capture:1},{move:1,capture:1}]],hill:[[{move:1,capture:1},{move:1,capture:1},{move:1,capture:1}],[{move:1,capture:1},{move:0,capture:0},{move:1,capture:1}],[{move:1,capture:1},{move:1,capture:1},{move:1,capture:1}]],river:[[{move:0,capture:0},{move:1,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}],[{move:0,capture:0},{move:0,capture:0},{move:0,capture:0}]]}}];e.exports=r},function(e,t){"use strict";var r=function(e){return String(e).toLowerCase().replace(/ /g,"-")};e.exports=r},,,,,function(e,t,r){"use strict";var a=r(4),c=r(10),o=function(e,t,r){var o=document.getElementById("available-points"),u=document.getElementById("info"),p=parseInt(o.innerHTML,10),m=p-e.value;if(m>=0){var v=document.getElementById("capture-player-"+r);"General"===e.name&&document.getElementById("piece-select-general").remove(),"Royal Guard"===e.name&&v.innerHTML.indexOf("Royal Guard")>-1&&document.getElementById("piece-select-royal-guard").remove(),v.innerHTML+='<p><span data-name="'+e.name+'" class="piece player-'+r+" "+a(e.name)+'">'+e.name+"</span></p>"}m>0?(o.innerHTML=m,m<5&&document.getElementById("piece-select-general")&&document.getElementById("piece-select-general").remove(),m<4&&(document.getElementById("piece-select-royal-guard")&&document.getElementById("piece-select-royal-guard").remove(),document.getElementById("piece-select-tower")&&document.getElementById("piece-select-tower").remove()),m<3&&(document.getElementById("piece-select-archer")&&document.getElementById("piece-select-archer").remove(),document.getElementById("piece-select-bishop")&&document.getElementById("piece-select-bishop").remove(),document.getElementById("piece-select-knight")&&document.getElementById("piece-select-knight").remove(),document.getElementById("piece-select-lord")&&document.getElementById("piece-select-lord").remove()),m<2&&(document.getElementById("piece-select-lancer")&&document.getElementById("piece-select-lancer").remove(),document.getElementById("piece-select-slinger")&&document.getElementById("piece-select-slinger").remove())):(document.getElementById("pieces-container").remove(),u.innerHTML="<p>Place your selected pieces on the field ...</p>",Array.from(document.querySelectorAll("#capture-player-"+r+" p")).forEach(function(e){e.addEventListener("click",function(e){var a=e.target.dataset.name;this.remove(),c(a,t,r)})}))};e.exports=o},function(e,t){"use strict";var r=function(e,t,r){var a=t.length,c=t[0].length,o=document.getElementById("info");if("King"===e.name)for(var u=function(e){for(var u=function(u){var p=document.getElementById(e+"-"+u);1===r&&(e!==a-1||0===u||u===c-1)||2===r&&(0!==e||0===u||u===c-1)?p.className+=" forbidden":p.addEventListener("click",function(a){t[e][u].piece={type:"King",player:1===r?2:1},document.getElementById("field").innerHTML=renderField(t),socket.emit("king",{position:{i:e,j:u}}),o.innerHTML="Waiting on your rival to place your king ..."})},p=0;p<c;p++)u(p)},p=0;p<a;p++)u(p);else for(var m=function(u){for(var p=function(c){var p=document.getElementById(u+"-"+c);1===r&&0!==u&&1!==u&&2!==u||2===r&&u!==a-1&&u!==a-2&&u!==a-3||p.innerHTML||"river"===t[u][c].type?p.className.indexOf("forbidden")===-1&&(p.className+=" forbidden"):p.addEventListener("click",function(a){t[u][c].piece={type:e,player:r},document.getElementById("field").innerHTML=renderField(t),document.querySelectorAll("#capture-player-"+r+" p").length||!function(){var e=[];t.forEach(function(t,r){t.forEach(function(t,a){t.piece&&"King"!==t.piece.type&&e.push({type:t.piece.type,i:r,j:a})})}),socket.emit("initial",{pieces:e}),o.innerHTML="Waiting on your rival to place his/her pieces ..."}()})},m=0;m<c;m++)p(m)},v=0;v<a;v++)m(v)};e.exports=r},function(e,t){"use strict";var r=function(e,t){var r=t.find(function(t){return t.id!==e.id});return r.level>=e.level?33:33-(e.level-r.level)};e.exports=r},function(e,t){"use strict";var r=function(e){var t="";return t+='<span class="">'+(5-e.back)+"</span>",t+=e.pieces.reduce(function(e,t){return'<span id="" class="">'+t.name+"</span>"},"")};e.exports=r},function(e,t){"use strict";var r=function(e){var t=e.length,r=e[0].length,a="";a+='<table class="field">';for(var c=0;c<t;c++){a+="<tr>";for(var o=0;o<r;o++)a+='<td id="'+c+"-"+o+'" class="tile '+e[c][o].type+'">'+(e[c][o].piece?"<span data-name='"+e[c][o].piece.type+"' class='piece player-"+e[c][o].piece.player+" "+e[c][o].piece.type.toLocaleLowerCase().replace(/ /g,"-")+"'>"+e[c][o].piece.type+"</span>":"")+"</td>";a+="</tr>"}return a+="</table>"};e.exports=r},function(e,t){"use strict";var r=function(e){var t=e[0],r=e[1];return'<span class="player-1">'+t.name+'</span> vs <span class="player-2">'+r.name+"</span>"};e.exports=r},,function(e,t){"use strict";var r=function(e,t,r,a){document.getElementById(r.i+"-"+r.j).className+=" selected";var c=e[r.i][r.j].type,o=t.action[c],u={};3===o.length?(u.i={start:Math.max(0,r.i-1),end:Math.min(e.length,r.i+1)},u.j={start:Math.max(0,r.j-1),end:Math.min(e[0].length,r.j+1)}):(u.i={start:Math.max(0,r.i-2),end:Math.min(e.length,r.i+2)},u.j={start:Math.max(0,r.j-2),end:Math.min(e[0].length,r.j+2)});var p=Math.floor(o.length/2);if(1===a)for(var m=u.i.end;m>=u.i.start;m--)for(var v=u.j.end;v>=u.j.start;v--)console.log(m+"-"+v),console.log(e[m][v]),console.log(o[m+(p-r.i)][v+(p-r.j)].move),console.log(o[m+(p-r.i)][v+(p-r.j)].capture);else for(var n=u.i.start;n<=u.i.end;n++)for(var i=u.j.start;i<=u.j.end;i++)console.log(n+"-"+i),console.log(e[n][i]),console.log(o[n+(p-r.i)][i+(p-r.j)].move),console.log(o[n+(p-r.i)][i+(p-r.j)].capture)};e.exports=r}]);